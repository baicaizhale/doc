import{useLocaleConfig as d,wait as f,LoadingIcon as c}from"@vuepress/helper/client";import{watchImmediate as g}from"@vueuse/core";import{pageviewCount as C}from"@waline/client/pageview";import{defineComponent as L,computed as i,h as a,onMounted as w,nextTick as h,defineAsyncComponent as y}from"vue";import{usePageFrontmatter as W,usePageLang as A,ClientOnly as E}from"vuepress/client";import"@waline/client/waline.css";import"../styles/waline.css";import{c as I}from"../index-C4kzYjlG.js";const N=WALINE_LOCALES;WALINE_META&&import("@waline/client/waline-meta.css");var R=L({name:"WalineComment",props:{identifier:{type:String,required:!0}},setup(t){const e=I(),m=W(),p=A(),s=d(N);let r=null;const o=i(()=>!!e.value.serverURL),l=i(()=>{if(!o.value)return!1;const n=e.value.pageview!==!1,u=m.value.pageview;return!!u||n&&u!==!1}),v=i(()=>({lang:p.value==="zh-CN"?"zh-CN":"en",locale:s.value,dark:"[data-theme='dark']",...e.value,path:t.identifier}));return w(()=>{g(()=>[t.identifier,e.value.serverURL,e.value.delay,l.value],async()=>{r?.(),r=null,l.value&&(await h(),await f(e.value.delay??800),r=C({serverURL:e.value.serverURL,path:t.identifier}))},{flush:"post"})}),()=>o.value?a("div",{id:"comment",class:"waline-wrapper"},a(y({loader:async()=>{const{Waline:n}=await import("@waline/client/component");return()=>a(E,()=>a(n,v.value))},loadingComponent:c}))):null}});export{R as default};
//# sourceMappingURL=WalineComment.js.map
