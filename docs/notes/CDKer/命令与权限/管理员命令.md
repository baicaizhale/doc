---
title: 管理员命令
createTime: 2025/07/03 12:57:14
permalink: /notes/CDKer/命令与权限/管理员命令/
---
### 管理员命令

本节详细阐述了 CDKer 插件中供服务器管理员使用的命令。这些命令提供了对礼品码生命周期进行全面控制的能力，包括创建、修改、删除、查询和导出等操作。请注意，执行这些命令通常需要特定的权限，默认为服务器操作员（OP）权限。所有管理员命令均支持 Tab 自动补全功能，以提升操作效率。

* **`/cdk help`**
    * **描述**: 此命令用于显示 CDKer 插件所有可用命令的详细列表及其各自的用法说明。它为管理员提供了一个快速参考指南。
    * **权限要求**: `cdk.help`。默认情况下，所有玩家均拥有此权限，允许任何用户查询插件功能。
    * **Tab 自动补全策略**: 支持 Tab 补全，但仅限于 `/cdk help` 本身。
    * **参数**: 无。
    * **示例**:
        * `/cdk help` - 显示插件的帮助信息。

* **`/cdk create single <id> <数量> "<命令1|命令2|...>" [有效时间]`**
    * **描述**: 此命令用于创建一种**一次性**使用的礼品码。每个由此命令生成的礼品码实例，在被一个玩家成功兑换后，将无法被该玩家再次使用。
    * **权限要求**: `cdk.create`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，用于子命令 `single` 和部分参数的提示。
    * **参数**:
        * `<id>`: 必需参数。指定礼品码的唯一标识符。此 ID 将作为礼品码在 `cdk.yml` 中的键。建议使用具有描述性且易于记忆的字符串。
        * `<数量>`: 必需参数。一个正整数，表示该礼品码实例可被兑换的总次数。对于 `single` 类型礼品码，此值通常设置为 `1`，表示该礼品码只能被使用一次。
        * `"<命令1|命令2|...>"`: 必需参数。一个用双引号 `"` 括起来的字符串，其中包含一个或多个服务器命令。多个命令之间必须使用竖线 `|` 符号进行分隔。这些命令将在礼品码成功兑换时由服务器控制台执行。命令中可包含 `%player%` 占位符，该占位符在执行时将自动替换为兑换礼品码的玩家名称。
        * `[有效时间]`: 可选参数。指定礼品码的过期日期和时间。格式必须严格遵循 `YYYY-MM-dd HH:mm`（例如 `2025-12-31 23:59`）。如果未提供此参数，则礼品码将永不过期，直至其 `remainingUses` 耗尽。
    * **示例**:
        * `/cdk create single WELCOME_GIFT 1 "give %player% bread 64"` - 创建一个名为 `WELCOME_GIFT` 的一次性礼品码，可使用 1 次，奖励 64 个面包。
        * `/cdk create single LIMITED_SWORD 1 "give %player% iron_sword 1|say %player% 获得了一把限时宝剑！" 2024-07-15 18:00` - 创建一个名为 `LIMITED_SWORD` 的一次性礼品码，可使用 1 次，奖励一把铁剑并发送消息，并设定过期时间。

* **`/cdk create multiple <name|random> <id> <数量> "<命令1|命令2|...>" [有效时间]`**
    * **描述**: 此命令用于创建一种**可多次使用**的礼品码。此类礼品码可以被不同的玩家重复兑换，直至其设定的总使用次数耗尽。
    * **权限要求**: `cdk.create`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，用于子命令 `multiple`、`name|random` 以及部分参数的提示。
    * **参数**:
        * `<name|random>`: 必需参数。此参数决定礼品码 ID 的生成方式。
            * 如果输入 `random`，插件将自动生成一个简短的随机字符串作为礼品码的唯一 ID。在这种情况下，后续的 `<id>` 参数将被忽略。
            * 如果输入其他字符串（例如 `VIP_BONUS`），则此字符串将被用作礼品码的名称，即 `<id>` 的值。
        * `<id>`: 必需参数。礼品码的唯一标识符。如果 `<name|random>` 参数为 `random`，则此参数将被忽略；否则，此参数的值将作为礼品码的 ID。
        * `<数量>`: 必需参数。一个正整数，表示该礼品码实例可被兑换的总次数。对于 `multiple` 类型礼品码，此值通常大于 1。
        * `"<命令1|命令2|...>"`: 必需参数。同 `create single` 命令中的命令列表参数。
        * `[有效时间]`: 可选参数。同 `create single` 命令中的有效时间参数。
    * **示例**:
        * `/cdk create multiple VIP_BONUS VIP666 999 "give %player% gold_ingot 5|eco give %player% 1000"` - 创建一个名为 `VIP666` 的可多次使用礼品码，总使用次数 999 次，奖励金锭和经济。
        * `/cdk create multiple random DIAMOND_PACK 50 "give %player% diamond 10" 2025-01-01 00:00` - 创建一个随机 ID 的可多次使用礼品码，总使用次数 50 次，奖励钻石，并设定过期时间。

* **`/cdk add <CDKCode> <数量>`**
    * **描述**: 此命令用于增加现有礼品码的 `remainingUses` 数量。如果指定的 `<CDKCode>` 不存在，该命令将自动创建一个新的礼品码实例（默认为 `single` 类型，且不绑定任何命令），并将其 `remainingUses` 初始化为指定 `<数量>`。
    * **权限要求**: `cdk.add`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，用于提示现有礼品码的 ID。
    * **参数**:
        * `<CDKCode>`: 必需参数。要增加使用次数的礼品码的唯一 ID。
        * `<数量>`: 必需参数。一个正整数，表示要为该礼品码增加的使用次数。
    * **示例**:
        * `/cdk add MY_FIRST_CDK 5` - 将名为 `MY_FIRST_CDK` 的礼品码的剩余使用次数增加 5。
        * `/cdk add NEW_CDK_2024 10` - 如果 `NEW_CDK_2024` 不存在，则创建一个新的礼品码，并设置其初始使用次数为 10。

* **`/cdk delete <cdk|id> <内容>`**
    * **描述**: 此命令用于从 `cdk.yml` 文件中删除一个或一组礼品码。同时，它也会清除 `used_codes.yml` 中与被删除礼品码相关的玩家使用记录，以确保数据完整性。
    * **权限要求**: `cdk.delete`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，用于提示删除类型 (`cdk` 或 `id`) 以及现有礼品码的 ID。
    * **参数**:
        * `<cdk|id>`: 必需参数。指定删除操作的类型。
            * `cdk`: 表示您希望删除单个、精确匹配的礼品码。
            * `id`: 表示您希望删除所有以 `<内容>` 为前缀的礼品码。此功能在管理按批次或类别命名的礼品码时非常有用（例如，删除所有以 "VIP" 开头的礼品码）。
        * `<内容>`: 必需参数。根据 `<cdk|id>` 的选择而定。
            * 如果选择 `cdk`，则此参数应为要删除的礼品码的完整、精确 ID。
            * 如果选择 `id`，则此参数应为礼品码 ID 的前缀。
    * **示例**:
        * `/cdk delete cdk MY_FIRST_CDK` - 删除名为 `MY_FIRST_CDK` 的单个礼品码。
        * `/cdk delete id VIP` - 删除所有 ID 以 "VIP" 开头的礼品码（例如 `VIP666`, `VIP_BONUS_001` 等）。

* **`/cdk list`**
    * **描述**: 此命令用于列出 `cdk.yml` 文件中所有当前有效的礼品码及其关键详细信息。它提供了一个快速概览礼品码状态的方式。
    * **权限要求**: `cdk.list`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，但无后续参数。
    * **参数**: 无。
    * **显示内容**: 对于每个礼品码，将显示其 ID、类型、绑定的命令（简要表示）、剩余使用次数以及过期时间（如果设置）。
    * **示例**:
        * `/cdk list` - 显示所有已注册礼品码的列表。

* **`/cdk reload`**
    * **描述**: 此命令用于重新加载 CDKer 插件的所有配置文件，包括 `config.yml`、`cdk.yml` 和所有语言文件。这使得管理员可以在不重启 Minecraft 服务器的情况下应用配置更改。
    * **权限要求**: `cdk.reload`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，但无后续参数。
    * **参数**: 无。
    * **重要提示**: 在手动修改配置文件后，务必执行此命令以使更改生效。
    * **示例**:
        * `/cdk reload` - 重新加载插件配置。

* **`/cdk export`**
    * **描述**: 此命令将 `cdk.yml` 中存储的所有礼品码数据导出到一个纯文本文件 (`cdk_export.txt`)。该文件将生成在 `plugins/CDKer/` 目录下。此功能对于数据备份、离线审查或与其他系统集成非常有用。
    * **权限要求**: `cdk.export`。默认权限为 `op`。
    * **Tab 自动补全策略**: 支持 Tab 补全，但无后续参数。
    * **参数**: 无。
    * **导出格式**: 导出的文本文件将包含每个礼品码的详细信息，包括类型、剩余次数、过期时间以及绑定的所有命令。
    * **示例**:
        * `/cdk export` - 导出所有礼品码数据。